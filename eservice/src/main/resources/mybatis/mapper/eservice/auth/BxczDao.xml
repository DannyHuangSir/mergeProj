<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.twfhclife.eservice.auth.dao.BxczDao">

	<insert id="insertBxczApiLog">
		INSERT INTO ESERVICE.DBO.BXCZ_API_LOG(ACTION_ID, TYPE, API_CODE, API_PARAM, API_RESPONSE)
		VALUES (#{actionId}, #{type}, #{apiCode}, #{apiParam}, #{apiResponse})
	</insert>

	<insert id="insertBxczSignRecord">
		INSERT INTO ESERVICE.DBO.BXCZ_SIGN_RECORD(ACTION_ID, TRANS_NUM, ACTION_ID_START, ACTION_ID_END, SIGN_DOWNLOAD)
		VALUES (#{actionId}, #{transNum}, #{date}, DATEADD(second, 300, #{date}), 'N')
	</insert>

	<insert id="updateBxczSignRecordByActionId">
		UPDATE ESERVICE.DBO.BXCZ_SIGN_RECORD
		SET VERIFY_CODE = #{code}, VERIFY_MSG = #{msg}, ID_VERIFY_STATUS = #{vo.idVerifyStatus}, ID_VERIFY_TIME = #{vo.idVerifyTime},
		ID_VERIFY_TYPE = #{vo.idVerifyType}, SIGN_FILEID = #{vo.signFileId}, SIGN_STATUS = #{vo.signStatus}, SIGN_TIME = #{vo.signTime}
		WHERE ACTION_ID = #{vo.actionId}
	</insert>
</mapper>